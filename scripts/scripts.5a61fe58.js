"use strict";function config(a){function b(a,b){return a.all([b.getGradientStyles(),b.getLinearGradientDirections(),b.getRadialGradientPositions(),b.getRadialGradientSizes(),b.getGradientPresets()])}a.when("/gradient",{templateUrl:"views/gradients.html",controller:"gradients.GradientsCtrl",controllerAs:"gradVM",resolve:{gradientsData:b}}).when("/",{}).otherwise({redirectTo:"/gradient"}),b.$inject=["$q","gradientDataService"]}!function(){angular.injector(["ng"]).invoke(["$http",function(a){a.get("./resources/csstemplate").then(function(a){angular.module("gradientsApp").constant("config",{baseUrl:"http://eugenecanhelp-app1ica.rhcloud.com"}),angular.module("gradientsApp").constant("gradientCSSTemplate",a.data),angular.element(document).ready(function(){angular.bootstrap(document,["gradientsApp"])})})}])}(),angular.module("gradientsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","directives","services","gradient-directives","gradient-services"]).config(config),config.$inject=["$routeProvider"],function(){function a(a,b,c,d,e,f){function g(){m.styleString=e.getCss(m.data,m.gradient,m.gradientStops)}function h(){var a=m.gradientStops.length,b=m.gradientStops[a-1],c=m.gradientStops[a-2],d=(Number(b.location)+Number(c.location))/2;m.gradientStops.splice(a-1,0,{location:d,color:"#"+Math.floor(16777215*Math.random()).toString(16)})}function i(a,b){m.gradientStops.splice(b,1)}function j(a,b){c(function(){m.gradientStops[a].color=b},10)}function k(){var b=m.gradientStops;f.createPreset({preset:b}).then(function(b){a.$emit("gradients.showPopup",b.data)},function(b){a.$emit("gradients.showPopup",b)})}function l(b){angular.copy(b,m.gradientStops),a.$digest()}var m=this;m.gradientStops=[],m.addStop=h,m.removeStop=i,m.changeColorStop=j,m.createPreset=k,m.setSelectedPreset=l,m.data={},m.data.gradientStyles=d[0].data.gradientStyles,m.data.linearGradientDirections=d[1].data.linearGradientDirections,m.data.radialGradientPositions=d[2].data.radialGradientPositions,m.data.radialGradientSizes=d[3].data.radialGradientSizes,m.presetItems=d[4].data.presets,angular.copy(m.presetItems[0],m.gradientStops),m.gradient={},m.gradient.gradientStyle=m.data.gradientStyles[0].name,m.gradient.linearGradientDirection=m.data.linearGradientDirections[0].name,m.gradient.radialGradientPosition=m.data.radialGradientPositions[0].name,m.gradient.radialGradientSize=m.data.radialGradientSizes[0].name,a.$watchGroup(["gradVM.gradient.gradientStyle","gradVM.gradient.linearGradientDirection","gradVM.gradient.radialGradientPosition","gradVM.gradient.radialGradientSize"],function(){g()}),a.$watch("gradVM.gradientStops",function(){g()},!0)}angular.module("gradientsApp").controller("gradients.GradientsCtrl",a),a.$inject=["$scope","$q","$timeout","gradientsData","CalcCssString","gradientDataService"]}(),function(){function a(a,b,c,d){function e(a,b){d.showModal({templateUrl:"./directives/popup.template.html",controller:"PopupController",controllerAs:"vm",inputs:{title:a,body:b}}).then(function(a){a.element.modal(),a.close.then(function(a){c.message=a?"You said Yes":"You said No"})})}function f(){b.sendMessage(i.message).then(function(a){i.showModal("Inquirie delivered","Thank you for your message. I'll get back to you shortly")},function(a){i.showModal("Sorry, something went wrong.","Please, drop me an email to eugene.v.emelyanov at gmail.com")})}function g(){return a.path()}function h(b,d){function e(){$("html, body").stop().animate({scrollTop:$(d).offset().top},1e3)}if("/"===b)if(a.path()!==b)var f=c.$root.$on("$locationChangeSuccess",function(){e(),f()});else e();else d="#mainBodyContainer",e();a.path(b)}var i=this;i.message={},i.pageName=g,i.navigateToPath=h,i.onSendMessage=f,i.showModal=e,c.$on("gradients.showPopup",function(a,b){i.showModal("Preset created.","Thank you for your preset. It will be available in our presets library.")}),showAngularStats({position:"topright"})}angular.module("gradientsApp").controller("gradients.MainController",a),a.$inject=["$location","CommonServices","$scope","ModalService"]}(),function(){function a(a,b,c,d){function e(){d(null,500)}var f=this;f.title=b,f.body=c,f.closePopup=e}angular.module("gradientsApp").controller("PopupController",a),a.$inject=["$scope","title","body","close"]}(),function(){angular.module("directives",[])}(),function(){function a(){return{restrict:"E",replace:!0,templateUrl:"./directives/footer.template.html"}}angular.module("directives").directive("gradients.footer",a)}(),function(){function a(){return{restrict:"E",replace:!0,templateUrl:"./directives/header.template.html"}}angular.module("directives").directive("gradients.header",a)}(),function(){function a(){return{restrict:"E",transclude:!0,templateUrl:"./directives/panel.template.html",scope:{panelTitle:"@panelTitle"}}}angular.module("directives").directive("gradients.panel",a)}(),function(){function a(){return{templateUrl:"./directives/buttonbar.template.html",scope:{dataprovider:"=dataprovider",selectedItemChange:"&selectedItemChange"},link:["scope","elem",function(a,b){var c=b;a.selectedItemIndex=0,a.selectedItemChange(),a.itemClicked=function(b){$($(".btn",c)[a.selectedItemIndex]).removeClass("active"),a.selectedItemIndex=b,$($(".btn",c)[b]).addClass("active"),a.selectedItemChange()(a.dataprovider[b].name)}}]}}angular.module("directives").directive("gradients.buttonbar",a)}(),function(){function a(){return{link:b}}function b(a,b,c){var d=a.gradVM;b.colorpicker({color:c.colorPicker,component:"#colorStop"}).on("changeColor.colorpicker",function(a){var b=a.color.toHex();d.changeColorStop(c.index,b)}),c.$observe("colorPicker",function(a){b.colorpicker("setValue",a)}),a.$on("$destroy",function(){b.colorpicker("destroy")})}angular.module("directives").directive("colorPicker",a),b.$inject=["scope","elem","attrs"]}(),function(){angular.module("gradient-directives",["directives"])}(),function(){function a(){return{restrict:"E",controllerAs:"vm",bindToController:!0,controller:b,templateUrl:"./directives/gradients/options.template.html"}}function b(a){var b=this,c=a.gradVM;b.linearGradientTypeChanged=function(a){c.gradient.linearGradientDirection=a},b.radialGradientPositionChange=function(a){c.gradient.radialGradientPosition=a},b.radialGradientSizeChange=function(a){c.gradient.radialGradientSize=a}}angular.module("gradient-directives").directive("gradients.options",a),b.$inject=["$scope"]}(),function(){function a(){return{templateUrl:"./directives/gradients/preview.template.html",restrict:"E"}}angular.module("gradient-directives").directive("gradients.preview",a)}(),function(){function a(){return{templateUrl:"./directives/gradients/stops.template.html"}}angular.module("gradient-directives").directive("gradients.stops",a)}(),function(){function a(){return{templateUrl:"./directives/gradients/presets.template.html"}}angular.module("gradient-directives").directive("gradients.presets",a)}(),function(){function a(a){function b(b,c,d,e){e.styleStr=a.getCss(e.gradientStyles,e.gradientType,e.presetStyle),c.on("click",function(){e.onPresetChanged()(e.presetStyle)})}return b.$inject=["scope","elem","attr","ctrl"],{template:"<div class='preset' style='{{vm.styleStr}}'></div>",restrict:"E",controllerAs:"vm",bindToController:!0,controller:function(){},scope:{presetStyle:"=presetStyle",gradientStyles:"=gradientStyles",gradientType:"=gradientType",onPresetChanged:"&onPresetChanged"},link:b}}angular.module("gradient-directives").directive("gradients.preset",a),a.$inject=["CalcCssString"]}(),function(){function a(){return{templateUrl:"./directives/gradients/markup.template.html"}}angular.module("gradient-directives").directive("gradients.markup",a)}(),function(){angular.module("services",["gradientsApp"])}(),function(){function a(a){return{GRADIENT_STYLES:a.baseUrl+"/api/v1/gradientstyles",LINEAR_GRADIENT_DIRECTIONS:a.baseUrl+"/api/v1/lineardirections",RADIAL_GRADIENT_POSITIONS:a.baseUrl+"/api/v1/radialpositions",RADIAL_GRADIENT_SIZES:a.baseUrl+"/api/v1/radialgradientsizes",GRADIENT_PRESETS:a.baseUrl+"/api/v1/presets",GRADIENT_PRESETS_CREATE:a.baseUrl+"/api/v1/presets",CSS_TEMPLATE:"./resources/csstemplate",SEND_EMAIL:a.baseUrl+"/api/v1/email"}}angular.module("gradientsApp").factory("API",a),a.$inject=["config"]}(),function(){function a(a,b){return{sendMessage:function(c){return a.post(b.SEND_EMAIL,c)}}}angular.module("gradientsApp").factory("CommonServices",a),a.$inject=["$http","API"]}(),function(){function a(a,b,c,d,e,f,g){function h(a,b){var c=f.defer();if(a)c.resolve(a);else if(b){var e=g.get(b);e?c.resolve(e):d({method:"GET",url:b,cache:!0}).then(function(a){g.put(b,a.data),c.resolve(a.data)},function(a){c.reject(a)})}else c.reject("No template or templateUrl specified");return c.promise}function i(a){var d=f.defer(),g=a.controller;return g?(a.controllerAs&&(g=g+" as "+a.controllerAs),h(a.template,a.templateUrl).then(function(h){var i=e.$new(),j=f.defer(),l={$scope:i,close:function(a,b){(void 0===b||null===b)&&(b=0),window.setTimeout(function(){j.resolve(a),i.$destroy(),p.remove(),l.close=null,d=null,j=null,r=null,l=null,p=null,i=null},b)}};if(a.inputs)for(var m in a.inputs)l[m]=a.inputs[m];var n=angular.element(h),o=b(n),p=o(i);l.$element=p;var q=c(g,l);a.appendElement?a.appendElement.append(p):k.append(p);var r={controller:q,scope:i,element:p,close:j.promise};d.resolve(r)}).then(null,function(a){d.reject(a)}),d.promise):(deffer.reject("No controller specified"),d.promise)}var j=this;j.showModal=i;var k=a.find("body")}angular.module("services").service("ModalService",a),a.$inject=["$document","$compile","$controller","$http","$rootScope","$q","$templateCache"]}(),function(){angular.module("gradient-services",["services"])}(),function(){function a(a,b){return{getGradientStyles:function(){return a.get(b.GRADIENT_STYLES)},getLinearGradientDirections:function(){return a.get(b.LINEAR_GRADIENT_DIRECTIONS)},getRadialGradientPositions:function(){return a.get(b.RADIAL_GRADIENT_POSITIONS)},getRadialGradientSizes:function(){return a.get(b.RADIAL_GRADIENT_SIZES)},getGradientPresets:function(){return a.get(b.GRADIENT_PRESETS)},getGradientCssTemplate:function(){return a.get(b.CSS_TEMPLATE)},createPreset:function(c){return a.put(b.GRADIENT_PRESETS_CREATE,c)}}}angular.module("gradient-services").factory("gradientDataService",a),a.$inject=["$http","API"]}(),function(){function a(a){function b(a,b,c){return("undefined"==typeof c||null===c)&&(c="value"),"undefined"==typeof b||null===b?"":b.filter(function(b){return b.name===a})[0][c]}var c="";angular.copy(a,c),this.getCss=function(c,d,e){var f="",g="";switch(f=angular.copy(a,f),d.gradientStyle){case c.gradientStyles[0].name:f=f.replace(/%gradientType/g,c.gradientStyles[0].value),f=f.replace(/%w3cGradientStyle/g,d.linearGradientDirection),g=b(d.linearGradientDirection,c.linearGradientDirections,"safariValue"),f=f.replace(/%safariGradientStyle/g,g[0]+", "+g[1]),f=f.replace(/%gradientStyle/g,b(d.linearGradientDirection,c.linearGradientDirections));break;case c.gradientStyles[1].name:f=f.replace(/%gradientType/g,c.gradientStyles[1].value),f=f.replace(/%w3cGradientStyle/g,"ellipse "+d.radialGradientSize+" at "+d.radialGradientPosition),f=f.replace(/%gradientStyle/g,b(d.radialGradientPosition,c.radialGradientPositions)+", ellipse "+b(d.radialGradientSize,c.radialGradientSizes)),g=b(d.radialGradientPosition,c.radialGradientPositions,"safariValue"),f=f.replace(/%safariGradientStyle/g,g[0]+", "+g[1]);break;default:case c.gradientStyles[0].name:f=f.replace(/%gradientType/g,c.gradientStyles[0].value),f=f.replace(/%gradientStyle/g,c.linearGradientDirections[0].value)}if(f=f.replace(/%safariGradientType/g,d.gradientStyle.toLowerCase()),e&&e.length>0){var h=e.map(function(a){return a.color+" "+a.location+"%"}).reduce(function(a,b){return a+", "+b});f=f.replace(/%gradientStops/g,h),h=e.map(function(a){return"color-stop("+a.location+", "+a.color+")"}).reduce(function(a,b){return a+", "+b}),f=f.replace(/%safariGradientStops/g,h)}return f}}angular.module("gradient-services").service("CalcCssString",a),a.$inject=["gradientCSSTemplate"]}();
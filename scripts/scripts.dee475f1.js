!function(){angular.injector(["ng"]).invoke(["$http",function(a){a.get("./resources/csstemplate").then(function(a){angular.module("gradientsApp").constant("config",{baseUrl:"./"}),angular.module("gradientsApp").constant("gradientCSSTemplate",a.data),angular.element(document).ready(function(){angular.bootstrap(document,["gradientsApp"])})})}])}(),angular.module("gradientsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","directives"]).config(["$routeProvider",function(a){a.when("/gradient",{templateUrl:"views/gradients.html",controller:"gradients.GradientsCtrl"}).when("/",{}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/gradient"})}]),angular.module("gradientsApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("gradientsApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),function(){var a=angular.module("gradientsApp");a.controller("gradients.GradientsCtrl",["$scope","$q","$timeout","stylesService","calculateStyles","CalcCssString",function(a,b,c,d,e,f){a.gradientStops=[],b.all([d.getGradientStyles(),d.getLinearGradientDirections(),d.getRadialGradientPositions(),d.getRadialGradientSizes(),d.getGradientPresets()]).then(function(b){function d(){a.styleString=f.getCss(a.data,a.gradient,a.gradientStops)}a.data={},a.data.gradientStyles=b[0].data.gradientStyles,a.data.linearGradientDirections=b[1].data.linearGradientDirections,a.data.radialGradientPositions=b[2].data.radialGradientPositions,a.data.radialGradientSizes=b[3].data.radialGradientSizes,a.presetItems=b[4].data.presets,angular.copy(a.presetItems[0],a.gradientStops),a.gradient={},a.gradient.gradientStyle=a.data.gradientStyles[0].name,a.gradient.linearGradientDirection=a.data.linearGradientDirections[0].name,a.gradient.radialGradientPosition=a.data.radialGradientPositions[0].name,a.gradient.radialGradientSize=a.data.radialGradientSizes[0].name,a.$watchGroup(["gradient.gradientStyle","gradient.linearGradientDirection","gradient.radialGradientPosition","gradient.radialGradientSize"],function(){d()}),a.$watch("gradientStops",function(a,b){d()},!0),a.addStop=function(b){var c=a.gradientStops.length,d=a.gradientStops[c-1],e=a.gradientStops[c-2],f=(Number(d.location)+Number(e.location))/2;a.gradientStops.splice(c-1,0,{location:f,color:"#"+Math.floor(16777215*Math.random()).toString(16)})},a.removeStop=function(b,c){a.gradientStops.splice(c,1)},a.changeColorStop=function(b,d){c(function(){a.gradientStops[b].color=d},10)},a.setSelectedPreset=function(b){angular.copy(b,a.gradientStops),a.$digest()}})}])}(),function(){var a=angular.module("gradientsApp");a.controller("gradients.MainController",["$scope","$route","$location",function(a,b,c){a.pageName=function(){return c.path()},c.path("/gradient"),a.go=function(a,b){if("/"===a){var b=$(this);$("html, body").stop().animate({scrollTop:$(b.attr("href")).offset()?$(b.attr("href")).offset().top:0},1e3)}c.path(a)}}])}(),function(){angular.module("directives",[])}(),function(){var a=angular.module("directives");a.directive("gradients.footer",function(){return{restrict:"E",replace:!0,templateUrl:"./directives/footer.template.html"}})}(),function(){var a=angular.module("directives");a.directive("gradients.header",function(){return{restrict:"E",replace:!0,templateUrl:"./directives/header.template.html"}})}(),function(){var a=angular.module("directives");a.directive("gradients.options",["Constants",function(a){return{restrict:"E",controller:["$scope",function(a){a.linearGradientTypeChanged=function(b){a.gradient.linearGradientDirection=b},a.radialGradientPositionChange=function(b){a.gradient.radialGradientPosition=b},a.radialGradientSizeChange=function(b){a.gradient.radialGradientSize=b}}],templateUrl:"./directives/gradient.options.template.html"}}])}(),function(){var a=angular.module("directives");a.directive("gradients.panel",function(){return{restrict:"E",transclude:!0,templateUrl:"./directives/panel.template.html",scope:{panelTitle:"@panelTitle"}}})}(),function(){var a=angular.module("directives");a.directive("gradients.preview",function(){return{templateUrl:"./directives/gradient.preview.template.html",controller:"gradients.GradientsCtrl",restrict:"E"}})}(),function(){var a=angular.module("directives");a.directive("gradients.stops",function(){return{templateUrl:"./directives/gradient.stops.template.html",compile:function(a,b,c){return{post:function(a,b,c){console.log("postlink")}}}}}),a.directive("colorPicker",function(){return{link:function(a,b,c){b.colorpicker({color:c.colorPicker,component:"#colorStop"}).on("changeColor.colorpicker",function(b){var d=b.color.toHex();a.changeColorStop(c.index,d)}),c.$observe("colorPicker",function(a){b.colorpicker("setValue",a)}),a.$on("$destroy",function(){b.colorpicker("destroy")})}}})}(),function(){var a=angular.module("directives");a.directive("gradients.buttonbar",function(){return{templateUrl:"./directives/buttonbar.template.html",scope:{dataprovider:"@dataprovider",selectedItemChange:"&selectedItemChange"},link:function(a,b,c){a.items=JSON.parse(a.dataprovider);var d=b;a.selectedItemIndex=0,a.selectedItemChange(),a.itemClicked=function(b){$($(".btn",d)[a.selectedItemIndex]).removeClass("active"),a.selectedItemIndex=b,$($(".btn",d)[b]).addClass("active"),a.selectedItemChange()(a.items[b].name)}}}})}(),function(){var a=angular.module("directives");a.directive("gradients.presets",function(){return{templateUrl:"./directives/gradient.presets.template.html",link:function(a,b,c){console.log("link: ")}}})}(),function(){var a=angular.module("directives");a.directive("gradients.preset",["CalcCssString",function(a){return{template:"<div class='preset' style='{{styleStr}}'></div>",restrict:"E",scope:{presetStyle:"=presetStyle",gradientStyles:"=gradientStyles",gradientType:"=gradientType",onPresetChanged:"&onPresetChanged"},link:function(b,c,d){b.styleStr=a.getCss(b.gradientStyles,b.gradientType,b.presetStyle),c.on("click",function(a){b.onPresetChanged()(b.presetStyle)})}}}])}(),function(){var a=angular.module("gradientsApp");a.provider("Constants",function(){return{$get:function(){return{gradientStyles:["Linear","Radial"],linearGradientDirections:["to bottom right","to bottom","to bottom left","to right","to left","to top right","to top","to top left"],radialGradientPositions:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],radialGradientSizes:["closest-side","closest-corner","farther-side","farthest-corner"]}}}})}(),function(){var a=angular.module("gradientsApp");a.factory("calculateStyles",function(){function a(a,b){return"undefined"==typeof b||null==b?"":b.filter(function(b,c){return b.name===a})[0].value}var b="%1(%2, %3)";return function(c,d,e){var f=c.gradientStyle,g=b.concat("");switch(f){case d.gradientStyles[0].name:g=g.replace("%1",d.gradientStyles[0].value),g=g.replace("%2",a(c.linearGradientDirection,d.linearGradientDirections));break;case d.gradientStyles[1].name:g=g.replace("%1",d.gradientStyles[1].value),g=g.replace("%2","ellipse "+a(c.radialGradientSize,d.radialGradientSizes)+" at "+a(c.radialGradientPosition,d.radialGradientPositions));break;default:case d.gradientStyles[0].name:g=g.replace("%1",d.gradientStyles[0].value),g=g.replace("%2",d.linearGradientDirections[0].value)}if(e&&e.length>0){var h=e.map(function(a){return a.color+" "+a.location+"%"}).reduce(function(a,b){return a+", "+b});g=g.replace("%3",h)}return{"background-image":g}}})}(),function(){var a=angular.module("gradientsApp");a.factory("stylesService",["$http","API",function(a,b){return{getGradientStyles:function(){return a.get(b.GRADIENT_STYLES)},getLinearGradientDirections:function(){return a.get(b.LINEAR_GRADIENT_DIRECTIONS)},getRadialGradientPositions:function(){return a.get(b.RADIAL_GRADIENT_POSITIONS)},getRadialGradientSizes:function(){return a.get(b.RADIAL_GRADIENT_SIZES)},getGradientPresets:function(){return a.get(b.GRADIENT_PRESETS)},getGradientCssTemplate:function(){return a.get(b.CSS_TEMPLATE)}}}])}(),function(){var a=angular.module("gradientsApp");a.factory("API",["config",function(a){return{GRADIENT_STYLES:a.baseUrl+"/resources/gradientStyles.json",LINEAR_GRADIENT_DIRECTIONS:a.baseUrl+"/resources/linearGradientDirections.json",RADIAL_GRADIENT_POSITIONS:a.baseUrl+"/resources/radialGradientPositions.json",RADIAL_GRADIENT_SIZES:a.baseUrl+"/resources/radialGradientSizes.json",GRADIENT_PRESETS:a.baseUrl+"/resources/presets.json",CSS_TEMPLATE:a.baseUrl+"resources/csstemplate"}}])}(),function(){var a=angular.module("directives");a.directive("gradients.markup",function(){return{templateUrl:"./directives/gradients.markup.template.html",link:function(a,b,c){}}})}(),function(){var a=angular.module("gradientsApp");a.service("CalcCssString",["gradientCSSTemplate",function(a){function b(a,b,c){return("undefined"==typeof c||null==c)&&(c="value"),"undefined"==typeof b||null==b?"":b.filter(function(b,c){return b.name===a})[0][c]}var c="";angular.copy(a,c),this.getCss=function(c,d,e){var f="";switch(f=angular.copy(a,f),d.gradientStyle){case c.gradientStyles[0].name:f=f.replace(/%gradientType/g,c.gradientStyles[0].value),f=f.replace(/%w3cGradientStyle/g,d.linearGradientDirection);var g=b(d.linearGradientDirection,c.linearGradientDirections,"safariValue");f=f.replace(/%safariGradientStyle/g,g[0]+", "+g[1]),f=f.replace(/%gradientStyle/g,b(d.linearGradientDirection,c.linearGradientDirections));break;case c.gradientStyles[1].name:f=f.replace(/%gradientType/g,c.gradientStyles[1].value),f=f.replace(/%w3cGradientStyle/g,"ellipse "+d.radialGradientSize+" at "+d.radialGradientPosition),f=f.replace(/%gradientStyle/g,b(d.radialGradientPosition,c.radialGradientPositions)+", ellipse "+b(d.radialGradientSize,c.radialGradientSizes));var g=b(d.radialGradientPosition,c.radialGradientPositions,"safariValue");f=f.replace(/%safariGradientStyle/g,g[0]+", "+g[1]);break;default:case c.gradientStyles[0].name:f=f.replace(/%gradientType/g,c.gradientStyles[0].value),f=f.replace(/%gradientStyle/g,c.linearGradientDirections[0].value)}if(f=f.replace(/%safariGradientType/g,d.gradientStyle.toLowerCase()),e&&e.length>0){var h=e.map(function(a){return a.color+" "+a.location+"%"}).reduce(function(a,b){return a+", "+b});f=f.replace(/%gradientStops/g,h),h=e.map(function(a){return"color-stop("+a.location+", "+a.color+")"}).reduce(function(a,b){return a+", "+b}),f=f.replace(/%safariGradientStops/g,h)}return f}}])}();